<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
        integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js"
        integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy"
        crossorigin="anonymous"></script>
    <title>Registration Form</title>
    <script src="https://www.google.com/recaptcha/api.js" async defer></script>
</head>

<style>
    img {
        width: 300px;
        height: 400px;
        padding-bottom: 20px;
    }
    input[type="submit"]{
        font-color:red;
    }
    input[type="text"],[type="password"],[type="email"],[type="number"]{
        border-top: none;
        border-left: none;
        border-right: none;
        border-bottom: 2px black solid;
    }
    .error-message {
        color: red;
    }
    .success-message {
        color: forestgreen;
    }
</style>

<body>

<div class="container bg-light" style="width:810px">
    <form id="loginForm" th:action="@{/registration}" method="POST" th:object="${user}">
        <div class="container border rounded " style="width: 800px; margin-top: 25px; box-shadow: rgba(20, 59, 220, 205) 0px 25px 50px -12px;">
            <div class="header">
                <h3 class="text-center mt-4"><strong>Sign Up</strong></h3> <hr>
            </div>
            <div class="error-message" th:if="${message}" th:text="${message}" style="background-color: #ffcccc; padding: 10px;"></div>
            <div class="success-message" th:if="${successMessage}" th:text="${successMessage}" style="background-color: #90EE90; padding: 10px;"></div>
            <div class="row">
                <div class="col">
                </div>
            </div>
            <div class="row">
                <div class="col">
                    <div class="col">
                        <img src="/images/loginn.jpg" alt="">
                    </div>
                </div>
                <div class="col" style="margin-top: 20px; margin-right: 30px;">
                    <input type="text" class="form-control" placeholder=" Your Name" id="name" name="name" pattern="[A-Za-z\s]+"
                        title="Name should contain only letters and spaces." required><br>
                    <input type="text" class="form-control" placeholder=" Your Email" id="email" name="email" required>
                    <input th:field="*{contactNo}" type="text" pattern="[6789][0-9]{9}" id="contactNo" name="contactNo" class="form-control mt-4 mb-4" placeholder=" Your contact" required="required">
                    <input th:field="*{password}" type="password" id="password" name="password" class="form-control mt-4 mb-4" placeholder=" Your Password" required="required">
                    <input th:field="*{confirmPassword}" type="password" id="confirmPassword" name="confirmPassword" class="form-control mt-4 mb-4" placeholder=" Confirm Password" required="required">
                    <div class="row">
                        <div class="col">
                            <label id="verifyCheckbox" required>VERIFY</label>
                            <div class="g-recaptcha" data-sitekey="6LfAc7ApAAAAAGPP1rZ7BMCBtXMf0Nd9kR-oxW2z" style="transform:scale(0.77)"></div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col">
                            <button type="submit" class="btn mt-3 mb-4 btn-primary">Sign up</button>
                        </div>
                    </div>
                    <div class="row">
                        <div class="d-flex justify-content-center links" style="margin-bottom: 20px">
                            Already have an account?<a href="/login">Login</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>

<script>
    document.getElementById("submitButton").addEventListener("click", function (event) {
        var recaptcha = document.querySelector('.g-recaptcha-response');
        if (!recaptcha || recaptcha.value === "") {
            event.preventDefault();
            alert("Please verify reCAPTCHA.");
        }
    });

    document.getElementById('loginForm').addEventListener('submit', function(event) {
        var emailInput = document.getElementById('email').value;
        var errorMessageDiv = document.querySelector('.error-message');
        var allowedDomains = ['gmail.com', 'yahoo.com', 'outlook.com', 'hotmail.com', 'developtrees.com'];

        var emailDomain = emailInput.split('@')[1];

        if (!allowedDomains.includes(emailDomain)) {
            errorMessageDiv.textContent = 'Please enter a valid email address from the allowed domains: gmail.com, yahoo.com, outlook.com, hotmail.com, developtrees.com.';
            event.preventDefault();
        } else {
            errorMessageDiv.textContent = '';
        }
    });
</script>

</body>

</html>



